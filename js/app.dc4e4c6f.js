(function(e){function t(t){for(var r,a,c=t[0],i=t[1],s=t[2],f=0,d=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(u,a)&&u[a]&&d.push(u[a][0]),u[a]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);h&&h(t);while(d.length)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==u[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},u={app:0},o=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-0df33243":"e78a7014","chunk-27b6524b":"e3e8ecc5","chunk-302b045a":"e13b3593","chunk-34e17753":"d5c45761","chunk-34efd382":"4135db1d","chunk-398a980a":"b5f9a96d","chunk-485b7460":"6545f06a","chunk-533c6215":"6b3fa831","chunk-7bceb272":"d52dde1c","chunk-c7aad496":"7a47a1c6","chunk-88ab5732":"6bed0ebb","chunk-ecca009a":"f2d22831"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-0df33243":1,"chunk-27b6524b":1,"chunk-302b045a":1,"chunk-34e17753":1,"chunk-34efd382":1,"chunk-398a980a":1,"chunk-485b7460":1,"chunk-533c6215":1,"chunk-7bceb272":1,"chunk-c7aad496":1,"chunk-88ab5732":1,"chunk-ecca009a":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0df33243":"c72d518e","chunk-27b6524b":"cf2865e8","chunk-302b045a":"0a232de3","chunk-34e17753":"c512b210","chunk-34efd382":"12ce3f26","chunk-398a980a":"2976492e","chunk-485b7460":"23b0a3f0","chunk-533c6215":"7c4ae4de","chunk-7bceb272":"e13b86a9","chunk-c7aad496":"e500bcf6","chunk-88ab5732":"37bf8e95","chunk-ecca009a":"825b0255"}[e]+".css",u=i.p+r,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var s=o[c],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===r||f===u))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){s=d[c],f=s.getAttribute("data-href");if(f===r||f===u)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var r=t&&t.target&&t.target.src||u,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],h.parentNode.removeChild(h),n(o)},h.href=u;var l=document.getElementsByTagName("head")[0];l.appendChild(h)})).then((function(){a[e]=0})));var r=u[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=u[e]=[t,n]}));t.push(r[2]=o);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,i.nc&&f.setAttribute("nonce",i.nc),f.src=c(e);var d=new Error;s=function(t){f.onerror=f.onload=null,clearTimeout(h);var n=u[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}u[e]=void 0}};var h=setTimeout((function(){s({type:"timeout",target:f})}),12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var h=f;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0613":function(e,t,n){"use strict";var r=n("2b0e"),a=n("2f62"),u=n("343b"),o=n("d4ec"),c=n("c173"),i=function e(){Object(o["a"])(this,e),this.streamId=0,this.ceremonyForm=new c["b"],this.isLastEventSubmitted=!1,this.isSubmitted=!1,this.submitTime="",this.signature="",this.formId=""};r["default"].use(a["a"]);var s=function(){return{userStatus:new u["a"],form:new i,homepageRoute:"/personalHomepage",eventInfo:{},sidebarActive:!0,overlayActive:!1}};t["a"]=new a["a"].Store({state:s(),mutations:{updateUserStatus:function(e,t){e.userStatus=t},updateCeremonyForm:function(e,t){e.form.ceremonyForm=t},updatePersonalInformation:function(e,t){e.form.ceremonyForm.personalInformation=t},updateLongevity:function(e,t){e.form.ceremonyForm.longevityBoards=t},updatePrayFor:function(e,t){e.form.ceremonyForm.prayBoards=t},updateAttendInfo:function(e,t){e.form.ceremonyForm.attendInfoList=t},updateLastEventSubmitted:function(e,t){e.form.isLastEventSubmitted=t},updateSubmitted:function(e,t){e.form.isSubmitted=t},updateStreamid:function(e,t){e.form.streamId=t},updateForm:function(e,t){e.form=t},resetState:function(e){Object.assign(e,s())},updateEventInfo:function(e,t){e.eventInfo=t},updateSidebarActive:function(e,t){e.sidebarActive=t},updateOverlayActive:function(e,t){e.overlayActive=t}},actions:{},modules:{}})},"343b":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("d4ec"),a=function e(){Object(r["a"])(this,e),this.isAdmin=!1}},"5c0b":function(e,t,n){"use strict";n("9c0c")},"65de":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("96cf");var r=n("1da1"),a=n("d4ec"),u=n("bee2"),o=n("dff9"),c=n("260b"),i=(n("e71f"),n("0613")),s=n("343b"),f=n("77d6"),d=function(){function e(){Object(a["a"])(this,e)}return Object(u["a"])(e,null,[{key:"init",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=c["a"].firestore(),n=o["a"].safeGetUser(),e.next=4,t.collection("users").doc(n.uid).set(f["a"].toObject(new s["a"]));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"load",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=c["a"].firestore(),n=o["a"].safeGetUser(),e.next=4,t.collection("users").doc(n.uid).get();case 4:r=e.sent,a=r.data(),a&&i["a"].commit("updateUserStatus",a);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}()},"77d6":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("d4ec"),a=n("bee2"),u=function(){function e(){Object(r["a"])(this,e)}return Object(a["a"])(e,null,[{key:"toObject",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}()},"9c0c":function(e,t,n){},ad19:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));n("96cf");var r=n("1da1"),a=n("d4ec"),u=n("bee2"),o=n("260b"),c=(n("e71f"),n("0613")),i=n("77d6"),s=n("dff9"),f=function(){function e(){Object(a["a"])(this,e)}return Object(u["a"])(e,null,[{key:"save",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,u,f,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]&&d[0],n=d.length>1&&void 0!==d[1]?d[1]:"",r=o["a"].firestore(),a=s["a"].safeGetUser(),u=c["a"].state.form,u.streamId){e.next=9;break}return e.next=8,this.getStreamId();case 8:u.streamId=e.sent;case 9:return u.submitTime=(new Date).toISOString(),u.signature=n,u.formId=a.uid,u.isSubmitted=t,f=i["a"].toObject(u),e.next=16,r.collection("forms").doc(u.formId).set(f);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"load",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o["a"].firestore(),n=s["a"].safeGetUser(),r=n.uid,e.next=5,t.collection("forms").doc(r).get();case 5:a=e.sent,u=a.data(),u&&c["a"].commit("updateForm",u);case 8:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getStreamId",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o["a"].firestore(),n=t.collection("variables").doc("form"),e.next=4,t.runTransaction(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r,a,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.get(n);case 2:if(r=e.sent,a=r.data(),a){e.next=6;break}throw new Error("variables.form not found");case 6:return u=a.streamCounter+1,e.next=9,t.update(n,{streamCounter:u});case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}()},afbc:function(e,t,n){"use strict";n("b0c0"),n("d3b7");var r=n("2b0e"),a=n("8c4f");r["default"].use(a["a"]);var u=[{path:"/",name:"FirebaseLogin",component:function(){return n.e("chunk-485b7460").then(n.bind(null,"4196"))}},{path:"/userpages",name:"UserPages",component:function(){return n.e("chunk-0df33243").then(n.bind(null,"0079"))},children:[{path:"/personalHomepage",name:"PersonalHomepage",component:function(){return n.e("chunk-34e17753").then(n.bind(null,"e098"))}},{path:"/afterSubmit",name:"AfterSubmit",component:function(){return n.e("chunk-398a980a").then(n.bind(null,"4817"))}},{path:"/form",name:"Form",component:function(){return n.e("chunk-27b6524b").then(n.bind(null,"c109"))},children:[{path:"personalInformation",name:"PersonalInformation",component:function(){return n.e("chunk-302b045a").then(n.bind(null,"7d6e"))}},{path:"longevity",name:"Longevity",component:function(){return n.e("chunk-533c6215").then(n.bind(null,"a16b"))}},{path:"prayFor",name:"PrayFor",component:function(){return n.e("chunk-34efd382").then(n.bind(null,"a1cf"))}},{path:"attendInfo",name:"AttendInfo",component:function(){return n.e("chunk-c7aad496").then(n.bind(null,"944b"))}},{path:"checkForm",name:"CheckForm",component:function(){return Promise.all([n.e("chunk-c7aad496"),n.e("chunk-88ab5732")]).then(n.bind(null,"2995"))}}]},{path:"/successful",name:"Successful",component:function(){return n.e("chunk-ecca009a").then(n.bind(null,"8672"))}},{path:"/saveOnly",name:"SaveOnly",component:function(){return n.e("chunk-7bceb272").then(n.bind(null,"272a"))}}]}],o=new a["a"]({base:"/",routes:u,linkActiveClass:"active"}),c=a["a"].prototype.push;a["a"].prototype.push=function(e){var t=this;return new Promise((function(n,r){c.call(t,e,(function(){n(t.currentRoute)}),(function(e){"NavigationDuplicated"===e.name?n(t.currentRoute):r(e)}))}))},t["a"]=o},b47d:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("2b0e"),a=new r["default"]},c173:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));n("b0c0");var r=n("d4ec"),a=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";Object(r["a"])(this,e),this.name=t,this.postcode=n,this.address=a,this.phone=u,this.telephone=o,this.email=c,this.line=i,this.wechat=s,this.informMethod=f},u=function e(t){Object(r["a"])(this,e),this.name=t,this.streamId=""},o=function e(t,n,a,u){Object(r["a"])(this,e),this.registerName=t,this.prayType=n,this.otherPrayType=a,this.prayDetail=u,this.streamId=""},c=function e(t,n,a,u,o,c,i,s,f){Object(r["a"])(this,e),this.name=t,this.gender=n,this.age=a,this.attendDate=u,this.attendTime=o,this.leaveDate=c,this.leaveTime=i,this.note=s,this.timestamp=f},i=function e(){Object(r["a"])(this,e),this.personalInformation=new a,this.longevityBoards=[new u("")],this.prayBoards=[new o("","","","")],this.attendInfoList=[new c("","","","","","","","","")]}},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("0cdd");var r=n("2b0e"),a=n("5f5b");n("ab8b"),n("2dd8");r["default"].use(a["a"]);var u=n("260b"),o=(n("ea7b"),n("ee98")),c=n.n(o),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view"),n("notifications",{attrs:{position:"bottom center"}})],1)},s=[],f=n("b47d"),d=r["default"].extend({mounted:function(){var e=this;f["a"].$on("notify",(function(t){e.$notify(t)}))}}),h=d,l=(n("5c0b"),n("2877")),p=Object(l["a"])(h,i,s,!1,null,null,null),m=p.exports,b=n("afbc"),v=n("0613"),g=n("ad19"),k=n("65de"),y=(n("96cf"),n("1da1")),w=n("d4ec"),O=n("bee2"),j=(n("e71f"),function(){function e(){Object(w["a"])(this,e)}return Object(O["a"])(e,null,[{key:"retrieve",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u["a"].firestore(),n="rainform",e.next=4,t.collection("events").doc(n).get();case 4:return r=e.sent,a=r.data(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}()),S={apiKey:"AIzaSyBWVvkkFXqZUQdoqbQ28Wv1vW2lkjHB2_0",authDomain:"rainform-d5375.firebaseapp.com",projectId:"rainform-d5375",storageBucket:"rainform-d5375.appspot.com",messagingSenderId:"244947259",appId:"1:244947259:web:5403facdd1c5885c7fff1e",measurementId:"G-FQ8P6Z4HV7"};r["default"].config.productionTip=!1,r["default"].use(c.a);t["default"]=new r["default"]({router:b["a"],store:v["a"],created:function(){var e=this;u["a"].initializeApp(S),u["a"].auth().languageCode="zh-TW",u["a"].auth().onAuthStateChanged((function(t){t?(k["a"].load(),g["a"].load(),j.retrieve().then((function(t){e.$store.commit("updateEventInfo",t)})),e.$router.push(e.$store.state.homepageRoute)):("/"!==e.$route.path&&e.$router.push("/"),e.$store.commit("resetState"))}))},render:function(e){return e(m)}}).$mount("#app")},dff9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("d4ec"),a=n("bee2"),u=n("260b"),o=(n("ea7b"),n("afbc")),c=n("b47d"),i=function(){function e(){Object(r["a"])(this,e)}return Object(a["a"])(e,null,[{key:"safeGetUser",value:function(){var e=u["a"].auth().currentUser;if(!e)throw o["a"].push("/"),c["a"].$emit("notify",{type:"error",title:"請重新登入"}),new Error("請重新登入");return e}}]),e}()}});
//# sourceMappingURL=app.dc4e4c6f.js.map